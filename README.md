# Equity Explorer (AKA Equitable Development Data Explorer)

### Setup
1.  Install project **node version listed in .nvmrc**
```
git  clone git@github.com:NYCPlanning/equity-tool.git
cd equity-tool
npm i
```

This command should install all necessary dependencies and set up Husky to run on all commits

2. Create `.env.local` and set the required environment variables.
   - Local development credentials are available within the NYC planning password vault under "EDDE Credentials"


### Running locally
To run the Nextjs dev server, run:
```
npm run dev
```

You can also run unit tests or the linter by running `npm run test` or `npm run lint`, respectively.

#### Testing data updates
When iterating through data updates, serving the files locally can help accelerate the verification process.
For this purpose, this repository provides an optional local environment to replicate s3.

To use this environment
- obtain the configuration files, either by running the script in the `ose-equity-tool-etl` repository or downloading them from the Digital Ocean Space
- Copy the files into the `localstack/configs` folder
- update the `NEXT_PUBLIC_DO_SPACE_URL` variable to point to `http://localhost:4566/configs`
   - If already running the frontend, restart the application to use the updated SPACE_URL.
- run `docker compose up`

The files will be automatically loaded to, and served from, the local s3 emulator.

### Tests
Run the suite of Jest tests under `/test`
```
npm run test
```

### 
The data powering this app is generated by this ETL workflow:
https://github.com/NYCPlanning/ose-equity-tool-etl

## Attribution

This project was originally bootstrapped via `create-next-app` using the `with-chakra-ui-typescript` preset

Additional project boilerplate and configuration was drawn from:
* https://github.com/Lukazovic/nextjs-with-chakra-ui-boilerplate
* https://github.com/tim-richter/next-boiler
